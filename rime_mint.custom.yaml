patch:
  # -------------------------------------------------------------
  # 1. 初始状态设置 (修改开关默认值)
  # -------------------------------------------------------------

  # 【默认英文】
  # 对应 switches 列表第 1 项 (ascii_mode)
  # 1 = 默认开启英文模式
  "switches/@0/reset": 1

  # 【默认简体】
  # 对应 switches 列表第 2 项 (simplification)
  # 1 = 默认开启 OpenCC 转换 (简体)
  "switches/@1/reset": 1
  "switches/+":
    - name: ascii_punct
      reset: 1 # 1 = 强制开启英文标点
      states: ["。，", "．，"]
  # -------------------------------------------------------------
  # 2. 中英切换逻辑 (只允许 Shift)
  # -------------------------------------------------------------
  "ascii_composer/switch_key":
    Shift_L: commit_code # 左Shift: 提交字母并切换模式
    Shift_R: commit_code # 右Shift: 提交字母并切换模式
    Control_L: noop # 屏蔽
    Control_R: noop # 屏蔽
    Caps_Lock: noop # 大写键: 清除编码 (Mac 习惯)

  # -------------------------------------------------------------
  # 3. 屏蔽杂项快捷键
  # 使用 "binding/+" 追加规则，将不需要的快捷键全设为 noop (无操作)
  # -------------------------------------------------------------
  "key_binder/bindings/+":
    # 屏蔽中英标点切换 (Ctrl + .)
    - { when: always, accept: Control+period, command: noop }

    # 屏蔽全角/半角切换 (Shift + Space)
    - { when: always, accept: Shift+space, command: noop }

    # 屏蔽简繁切换 (Ctrl + Shift + 4)
    - { when: always, accept: Control+Shift+4, command: noop }
  "speller/algebra/+":
    # 1. 容错：允许用 lue 代替 lve (例如：策略 celue -> celve)
    - derive/^([nl])ve$/$1ue/
